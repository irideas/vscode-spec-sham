import{_ as r,c as o,o as a,ae as d}from"./chunks/framework.B_lm770W.js";const m=JSON.parse('{"title":"URI Handler & Deep Links（Tree View 桥接摘要 SRS）","description":"","frontmatter":{},"headers":[],"relativePath":"tree-view/uri-handler-and-deep-links-srs.md","filePath":"tree-view/uri-handler-and-deep-links-srs.md","lastUpdated":1765187344000}'),i={name:"tree-view/uri-handler-and-deep-links-srs.md"};function l(t,e,n,s,c,h){return a(),o("div",null,[...e[0]||(e[0]=[d('<h1 id="uri-handler-deep-links-tree-view-桥接摘要-srs" tabindex="-1">URI Handler &amp; Deep Links（Tree View 桥接摘要 SRS） <a class="header-anchor" href="#uri-handler-deep-links-tree-view-桥接摘要-srs" aria-label="Permalink to &quot;URI Handler &amp; Deep Links（Tree View 桥接摘要 SRS）&quot;">​</a></h1><p>本文件只保留“与 Tree View 直接协同”的事实性需求，将平台级 URI/深链能力迁移到 <code>docs/external-entry</code> 生态。完整协议、安全、Remote/Web 行为请参阅 <code>../external-entry/uri-and-links-srs.md</code>。</p><h2 id="_1-文档定位与范围" tabindex="-1">1. 文档定位与范围 <a class="header-anchor" href="#_1-文档定位与范围" aria-label="Permalink to &quot;1. 文档定位与范围&quot;">​</a></h2><ul><li>目标：描述 Tree View 在接入外部入口（URI Handler/深链）时必须遵守的最小事实约束，避免与平台级规范重复。</li><li>范围：Tree View 可见性与激活、节点定位 (<code>TreeView.reveal</code>)、容器切换、上下文键同步、用例引用。URI 生成/校验/安全/Remote 重写等平台细节不在本文件展开。</li></ul><h2 id="_2-关联文档" tabindex="-1">2. 关联文档 <a class="header-anchor" href="#_2-关联文档" aria-label="Permalink to &quot;2. 关联文档&quot;">​</a></h2><ul><li>平台级 SRS：<code>../external-entry/uri-and-links-srs.md</code></li><li>平台级 SDD：<code>../external-entry/uri-and-links-sdd.md</code></li><li>安全/信任占位：<code>../external-entry/auth-and-trust-srs.md</code> / <code>../external-entry/auth-and-trust-sdd.md</code></li><li>Remote/Web 占位：<code>../external-entry/remote-routing-srs.md</code> / <code>../external-entry/remote-routing-sdd.md</code></li></ul><h2 id="_3-tree-view-协同的事实约束" tabindex="-1">3. Tree View 协同的事实约束 <a class="header-anchor" href="#_3-tree-view-协同的事实约束" aria-label="Permalink to &quot;3. Tree View 协同的事实约束&quot;">​</a></h2><ol><li><strong>视图可见性与激活</strong>：URI 触达时扩展已由 <code>onUri</code>（或隐式命令激活）拉起，需确保目标 Tree View Provider 已注册；若视图不在当前容器，可执行 <code>workbench.view.extension.&lt;container&gt;</code> 使其可见。</li><li><strong>节点定位</strong>：<code>TreeView.reveal</code> 需要可解析的节点对象；Provider 应提供基于业务主键的查找（例如 <code>resolveNodeById</code>）并在未找到时优雅提示。<code>TreeItem.collapsibleState</code> 为 <code>None</code> 时不会调用 <code>getChildren</code>。</li><li><strong>上下文键与菜单状态</strong>：当通过 URI 选中/聚焦节点后，应保持与用户手动点击等价的上下文键（如 <code>view == &lt;id&gt;</code>、<code>viewItem == &lt;contextValue&gt;</code>），以便命令/菜单/快捷键正常生效。</li><li><strong>链接生成</strong>：Tree 侧生成可分享链接时应使用 <code>vscode.env.uriScheme</code>，不要硬编码 <code>vscode://</code>；高风险操作的链接必须在消费端弹出确认（安全细节见外部入口 SRS）。</li><li><strong>性能与用户体验</strong>：深链落点通常直达具体节点；应避免在 <code>handleUri</code> 内做重 IO，必要时异步加载并以“正在定位/未找到”提示收束。</li></ol><h2 id="_4-典型协作场景-引用" tabindex="-1">4. 典型协作场景（引用） <a class="header-anchor" href="#_4-典型协作场景-引用" aria-label="Permalink to &quot;4. 典型协作场景（引用）&quot;">​</a></h2><ul><li><strong>UC-URI-01</strong> 告警/通知直达节点：外部链接 → <code>onUri</code> → 容器切换 → <code>TreeView.reveal</code>。</li><li><strong>UC-URI-02</strong> 节点分享链接：节点右键生成深链，接收方点击后在同一视图定位。</li><li><strong>UC-URI-03</strong> OAuth/设备登录回调：浏览器完成认证 → <code>onUri</code> 写入凭据 → 刷新 Tree View 状态。</li><li><strong>UC-URI-04</strong> 批量跳转执行命令：URI 携带多节点/命令参数，依次 reveal 或批处理。</li></ul><blockquote><p>用例详情、参数设计和安全约束见 <code>../external-entry/uri-and-links-srs.md#5-tree-view-协作摘要</code> 及相关章节。</p></blockquote><h2 id="_5-实践建议-非约束" tabindex="-1">5. 实践建议（非约束） <a class="header-anchor" href="#_5-实践建议-非约束" aria-label="Permalink to &quot;5. 实践建议（非约束）&quot;">​</a></h2><ul><li>保持“命令/服务”负责业务逻辑，URI Handler 只做解析与路由；通过 <code>onDidChangeTreeData</code> 触发 UI 刷新。</li><li>为分享链接定义稳定的节点主键（路径/ID），避免依赖易变显示文本。</li><li>深链落点前可先校验权限/状态，失败时提供 fallback（例如打开搜索或帮助文档）。</li></ul><h2 id="_6-未来演进" tabindex="-1">6. 未来演进 <a class="header-anchor" href="#_6-未来演进" aria-label="Permalink to &quot;6. 未来演进&quot;">​</a></h2><ul><li>后续若 Tree View 侧需要新的上下文键同步/容器切换能力，将在本文件补充；平台级外部入口的新增特性统一归档于 <code>docs/external-entry</code>。</li></ul>',15)])])}const _=r(i,[["render",l]]);export{m as __pageData,_ as default};
