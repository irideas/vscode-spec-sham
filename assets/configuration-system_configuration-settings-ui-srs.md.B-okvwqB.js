import{_ as l,c as e,o as t,ae as o}from"./chunks/framework.B_lm770W.js";const p=JSON.parse('{"title":"VS Code Configuration Settings UI 子系统需求规格说明书 (SRS)","description":"","frontmatter":{},"headers":[],"relativePath":"configuration-system/configuration-settings-ui-srs.md","filePath":"configuration-system/configuration-settings-ui-srs.md","lastUpdated":1765282498000}'),n={name:"configuration-system/configuration-settings-ui-srs.md"};function s(r,i,a,u,c,g){return t(),e("div",null,[...i[0]||(i[0]=[o('<h1 id="vs-code-configuration-settings-ui-子系统需求规格说明书-srs" tabindex="-1">VS Code Configuration Settings UI 子系统需求规格说明书 (SRS) <a class="header-anchor" href="#vs-code-configuration-settings-ui-子系统需求规格说明书-srs" aria-label="Permalink to &quot;VS Code Configuration Settings UI 子系统需求规格说明书 (SRS)&quot;">​</a></h1><h2 id="_1-引言" tabindex="-1">1. 引言 <a class="header-anchor" href="#_1-引言" aria-label="Permalink to &quot;1. 引言&quot;">​</a></h2><h3 id="_1-1-目的" tabindex="-1">1.1 目的 <a class="header-anchor" href="#_1-1-目的" aria-label="Permalink to &quot;1.1 目的&quot;">​</a></h3><p>本 SRS 定义 VS Code 中 <strong>Configuration Settings UI 子系统</strong> 的需求。该子系统负责：</p><ul><li>向终端用户提供图形化的 <strong>Settings Editor（Settings UI）</strong>；</li><li>提供进入 <strong>settings.json 直接编辑</strong> 的入口，并保证二者行为一致；</li><li>基于 Configuration Core 的声明、存储与访问能力，实现可搜索、可过滤、可追踪来源的配置编辑体验；</li><li>与 Settings Sync 系统、Enterprise Policy 系统在界面层协作，展示同步与策略状态。</li></ul><p>目标是从产品 / UX 角度，完整描述「用户如何通过 UI/JSON 同 VS Code 配置系统交互」的需求。</p><h3 id="_1-2-范围" tabindex="-1">1.2 范围 <a class="header-anchor" href="#_1-2-范围" aria-label="Permalink to &quot;1.2 范围&quot;">​</a></h3><p>本子系统覆盖：</p><ul><li><p><strong>Settings Editor（Settings UI）</strong>：</p><ul><li>打开方式：菜单、命令面板、快捷键等；</li><li>User / Workspace / Folder / Profile / Remote 等作用域视图切换；</li><li>搜索框与过滤（包括 <code>@modified</code> 等 filter token）；</li><li>按声明 schema 渲染每个 setting 的名称、描述、当前值、控件类型；</li><li>显示当前值来自哪个层（User / Workspace / Folder / Language / Policy）；</li><li>修改值并即时生效，以及「重置为默认」能力。</li></ul></li><li><p><strong>settings.json 编辑入口与体验衔接</strong>：</p><ul><li>从 UI 打开 User / Workspace / Folder / Profile settings.json；</li><li>使用 settings schema 驱动 JSON 编辑时的补全与校验（由 JSON 语言服务实现，本子系统关注入口与体验一致性）；</li><li>在 JSON 与 UI 之间保证值和修改状态的双向同步。</li></ul></li><li><p><strong>与外部系统的 UI 级集成</strong>：</p><ul><li>在 Settings UI 中提供 Settings Sync 的入口或状态展示；</li><li>对被 Enterprise Policy 管理的设置显示锁定状态并限制编辑。</li></ul></li></ul><p>本子系统不负责：</p><ul><li>配置 schema 的定义、注册与字段级验证规则（由 Configuration 声明子系统负责）；</li><li>settings 文件的物理路径、文件监听、分层合并算法（由 Configuration 存储与分层子系统负责）；</li><li><code>workspace.getConfiguration</code> / <code>update</code> / <code>onDidChangeConfiguration</code> 等编程 API 行为（由 Configuration 访问与变更子系统负责）；</li><li>Settings Sync / Enterprise Policy 的后端流程和协议（它们是独立系统，仅在 UI 层有入口与状态展示）。</li></ul><h3 id="_1-3-目标用户" tabindex="-1">1.3 目标用户 <a class="header-anchor" href="#_1-3-目标用户" aria-label="Permalink to &quot;1.3 目标用户&quot;">​</a></h3><ul><li>日常使用 VS Code 的开发者，通过 Settings UI 进行常规个性化配置；</li><li>偏好 JSON 的高级用户，通过 Settings UI 与 settings.json 双模式管理复杂配置；</li><li>企业环境用户，需要理解哪些设置由组织策略管理，哪些可以本地修改；</li><li>扩展开发者，需要验证自己声明的 settings 在 Settings UI 与 JSON 中的呈现和编辑行为。</li></ul><hr><h2 id="_2-基线与引用" tabindex="-1">2. 基线与引用 <a class="header-anchor" href="#_2-基线与引用" aria-label="Permalink to &quot;2. 基线与引用&quot;">​</a></h2><ul><li>基线：默认 <code>engines.vscode</code> ≥ 1.80；Profile / Remote / Policy 场景需考虑多层叠加与 UI 锁定状态。</li><li>官方参考：VS Code Settings UI 文档、Configuration API、Settings Sync、Enterprise Policy；VS Code 源码中的 Settings Editor、<code>ConfigurationService</code>。</li><li>站内引用：/configuration-system/configuration-core-srs（体系级事实与分层模型）、/configuration-system/configuration-storage-layering-srs（层与上下文）、/configuration-system/configuration-access-update-srs（API 语义）、/external-entry/uri-and-links-srs（外部入口，若 UI 提供跳转）。</li></ul><h2 id="_3-子系统定位与外部关系" tabindex="-1">3. 子系统定位与外部关系 <a class="header-anchor" href="#_3-子系统定位与外部关系" aria-label="Permalink to &quot;3. 子系统定位与外部关系&quot;">​</a></h2><h3 id="_3-1-在-configuration-系统中的角色" tabindex="-1">3.1 在 Configuration 系统中的角色 <a class="header-anchor" href="#_3-1-在-configuration-系统中的角色" aria-label="Permalink to &quot;3.1 在 Configuration 系统中的角色&quot;">​</a></h3><p>Settings UI 子系统是 Configuration Core 面向「人类用户」的交互入口：</p><ul><li><p>向上面对用户：</p><ul><li>使用统一的 Settings UI 将声明好的配置项按类别、关键字、标签呈现；</li><li>提供可理解的 scope 切换（User / Workspace 等）与来源提示；</li><li>提供 JSON 编辑入口和必要的诊断信息。</li></ul></li><li><p>向下依赖 Configuration Core：</p><ul><li>依赖 <strong>声明子系统</strong> 提供 settings schema（类型、默认值、描述、scope、tags、ignoreSync 等元数据）；</li><li>依赖 <strong>存储与分层子系统</strong> 提供当前上下文下的有效值和多层值视图；</li><li>依赖 <strong>访问与变更子系统</strong> 提供统一的读取 / 写入 / 变更事件 API。</li></ul></li></ul><p>Settings UI 子系统不直接操作配置文件，也不自行做分层合并，而是始终通过内部配置服务（Configuration Core 的 façade）工作。</p><h3 id="_3-2-与-configuration-内部子系统关系" tabindex="-1">3.2 与 Configuration 内部子系统关系 <a class="header-anchor" href="#_3-2-与-configuration-内部子系统关系" aria-label="Permalink to &quot;3.2 与 Configuration 内部子系统关系&quot;">​</a></h3><ul><li><p>与 <strong>声明子系统</strong>：</p><ul><li>使用 schema 构建设置列表与分类树；</li><li>通过 scope / tags 决定作用域切换的可用性、隐私提示（如 usesOnlineServices）等；</li><li>在 JSON 编辑模式中，驱动键名和值的补全与类型校验。</li></ul></li><li><p>与 <strong>存储与分层子系统</strong>：</p><ul><li>读取当前作用域下各 setting 的有效值；</li><li>通过 <code>inspect</code> 等接口获取 default / user / workspace / folder / language / policy 等各层值与来源文件；</li><li>使用存储子系统的错误信息展示 JSON 解析错误、回退行为。</li></ul></li><li><p>与 <strong>访问与变更子系统</strong>：</p><ul><li>通过 <code>getConfiguration</code> 构造视图，展示配置项当前值；</li><li>通过 <code>update</code> 将用户在 UI 中的变更写入对应层（User / Workspace / Folder / Language-specific）；</li><li>订阅 <code>onDidChangeConfiguration</code> 事件，刷新 UI 中的值和「已修改」标记。</li></ul></li></ul><h3 id="_3-3-与-settings-sync-enterprise-policy-的关系" tabindex="-1">3.3 与 Settings Sync / Enterprise Policy 的关系 <a class="header-anchor" href="#_3-3-与-settings-sync-enterprise-policy-的关系" aria-label="Permalink to &quot;3.3 与 Settings Sync / Enterprise Policy 的关系&quot;">​</a></h3><ul><li><p>Settings Sync 系统：</p><ul><li>通过 Settings UI 提供开启 / 管理同步的入口；</li><li>订阅配置变更事件，同步 User 层相关设置；</li><li>可能在 UI 中暴露「某设置是否参与同步」的可视状态（由 Sync 系统提供信息，本子系统仅展示）。</li></ul></li><li><p>Enterprise Policy 系统：</p><ul><li>通过配置模型向 Configuration Core 注入策略覆盖层；</li><li>Settings UI 子系统在读取值时自动看到策略覆盖结果；</li><li>对被策略锁定的设置，显示「由组织管理」等标记，禁用或限制编辑；具体策略逻辑在 Policy 系统中实现。</li></ul></li></ul><p>Settings Sync 与 Enterprise Policy 都是 VS Code 外部的独立系统，不属于 Configuration Core 的子系统，仅通过接口与 Configuration 交互。</p><hr><h2 id="_4-核心概念与术语" tabindex="-1">4. 核心概念与术语 <a class="header-anchor" href="#_4-核心概念与术语" aria-label="Permalink to &quot;4. 核心概念与术语&quot;">​</a></h2><h3 id="_4-1-settings-editor-settings-ui" tabindex="-1">4.1 Settings Editor / Settings UI <a class="header-anchor" href="#_4-1-settings-editor-settings-ui" aria-label="Permalink to &quot;4.1 Settings Editor / Settings UI&quot;">​</a></h3><ul><li>指通过菜单、命令或快捷键（如 <code>Ctrl+,</code> / <code>Cmd+,</code>）打开的图形化设置编辑器；</li><li>顶部包含搜索栏和过滤控制；主区域显示按类别或扩展分组的设置项列表；</li><li>支持 User / Workspace 等视图切换。</li></ul><h3 id="_4-2-settings-scope-视图-user-workspace-folder-profile-remote" tabindex="-1">4.2 Settings Scope 视图（User / Workspace / Folder / Profile / Remote） <a class="header-anchor" href="#_4-2-settings-scope-视图-user-workspace-folder-profile-remote" aria-label="Permalink to &quot;4.2 Settings Scope 视图（User / Workspace / Folder / Profile / Remote）&quot;">​</a></h3><ul><li><p>Settings UI 顶部或显著位置展示当前作用域：</p><ul><li>User：面向当前 VS Code 用户，全局生效；</li><li>Workspace：面向当前工程 / 文件夹；</li><li>Folder：在多根工作区中，针对某个具体 workspace folder；</li><li>Profile：针对当前激活 Profile 的设置视图；</li><li>Remote：在 Remote / Dev Container / WSL 等场景中的远端 User / Workspace 设置视图。</li></ul></li><li><p>不同视图对应写入的目标 settings.json 文件不同，但读取的合并模型规则一致。</p></li></ul><h3 id="_4-3-搜索与过滤-settings-filters" tabindex="-1">4.3 搜索与过滤（Settings Filters） <a class="header-anchor" href="#_4-3-搜索与过滤-settings-filters" aria-label="Permalink to &quot;4.3 搜索与过滤（Settings Filters）&quot;">​</a></h3><ul><li><p>顶部搜索框支持：</p><ul><li>关键字搜索：按 setting ID、标题、描述进行模糊匹配；</li><li>filter token：如 <code>@modified</code>、<code>@ext:&lt;extensionId&gt;</code>、<code>@lang:&lt;languageId&gt;</code> 等，用于缩小显示范围；</li><li>通过显式的 filter 按钮或菜单插入可用 token。</li></ul></li></ul><h3 id="_4-4-settings-json-编辑模式与切换" tabindex="-1">4.4 settings.json 编辑模式与切换 <a class="header-anchor" href="#_4-4-settings-json-编辑模式与切换" aria-label="Permalink to &quot;4.4 settings.json 编辑模式与切换&quot;">​</a></h3><ul><li><p>VS Code 支持两种配置编辑方式：</p><ul><li>图形化 Settings Editor；</li><li>直接编辑 settings.json 文件。</li></ul></li><li><p>行为特征：</p><ul><li>Settings Editor 的修改最终写入对应的 settings.json；</li><li>用户可以通过命令（如「Open Settings (JSON)」）或 Settings UI 右上角按钮跳转到 JSON；</li><li>设置 <code>workbench.settings.editor</code> 决定默认打开 UI 还是 JSON 模式。</li></ul></li></ul><p>本子系统要求在 UX 上将两种方式视为同一交互链路的不同视图，而不是两个割裂的系统。</p><h3 id="_4-5-modified-indicator-修改标记" tabindex="-1">4.5 Modified Indicator（修改标记） <a class="header-anchor" href="#_4-5-modified-indicator-修改标记" aria-label="Permalink to &quot;4.5 Modified Indicator（修改标记）&quot;">​</a></h3><ul><li>Settings UI 中，已修改设置（相对默认值或下层值）会有明显标记（如蓝色竖线）；</li><li>搜索中使用 <code>@modified</code> 时，列表只展示这些已修改设置；</li><li>修改标记基于多层值比较，而不只是当前层非空。</li></ul><hr><h2 id="_5-功能性需求-fr" tabindex="-1">5. 功能性需求（FR） <a class="header-anchor" href="#_5-功能性需求-fr" aria-label="Permalink to &quot;5. 功能性需求（FR）&quot;">​</a></h2><h3 id="_5-1-打开-settings-ui-与模式切换" tabindex="-1">5.1 打开 Settings UI 与模式切换 <a class="header-anchor" href="#_5-1-打开-settings-ui-与模式切换" aria-label="Permalink to &quot;5.1 打开 Settings UI 与模式切换&quot;">​</a></h3><p><strong>FR-UI-OPEN-001 打开 Settings UI</strong></p><ul><li><p>系统必须提供至少以下入口打开 Settings UI：</p><ul><li>菜单：Preferences / Settings（具体菜单名称与 VS Code 一致）；</li><li>命令面板命令：例如 “Preferences: Open Settings (UI)”；</li><li>快捷键：典型为 <code>Ctrl+,</code>（Windows/Linux）或 <code>Cmd+,</code>（macOS）。</li></ul></li></ul><p><strong>FR-UI-OPEN-002 打开 settings.json</strong></p><ul><li><p>系统必须提供至少以下入口打开 settings.json：</p><ul><li>命令面板命令：如 “Preferences: Open User Settings (JSON)”、“Preferences: Open Workspace Settings (JSON)” 等；</li><li>Settings UI 中的按钮（例如右上角 <code>{}</code> 图标），在当前 scope 下打开对应的 settings.json；</li><li>若从 Explorer 打开 <code>.vscode/settings.json</code>，也应享有相同的 JSON 编辑体验。</li></ul></li></ul><p><strong>FR-UI-OPEN-003 默认编辑模式控制</strong></p><ul><li>设置项 <code>workbench.settings.editor</code> 必须控制「打开设置」命令时默认采用 UI 模式还是 JSON 模式；</li><li>当设置为 JSON 时，打开设置直接进入 settings.json 编辑器；当为 UI 时则打开 Settings UI；</li><li>当该设置值改变时，下次打开 Settings 应遵循新配置。</li></ul><h3 id="_5-2-作用域切换与上下文感知" tabindex="-1">5.2 作用域切换与上下文感知 <a class="header-anchor" href="#_5-2-作用域切换与上下文感知" aria-label="Permalink to &quot;5.2 作用域切换与上下文感知&quot;">​</a></h3><p><strong>FR-UI-SCOPE-001 User / Workspace 等作用域切换</strong></p><ul><li><p>Settings UI 顶部必须提供 User / Workspace 等作用域切换控件；</p></li><li><p>无 Workspace 时，Workspace / Folder 等 scope 选项应隐藏或置灰；</p></li><li><p>当前作用域决定：</p><ul><li>读取时从哪一组多层视图中取值；</li><li>写入时 update 的目标层（配合访问与变更子系统）。</li></ul></li></ul><p><strong>FR-UI-SCOPE-002 多根工作区支持</strong></p><ul><li><p>在多根工作区中：</p><ul><li>Workspace 视图默认展示 <code>.code-workspace</code> 文件中的 settings；</li><li>若提供 Folder 视图，则应提供 UI 组件选择具体 folder，并针对该 folder 展示与写入设置；</li><li>若不提供完整 Folder 视图，应至少在 JSON 编辑中支持 folder 级 settings。</li></ul></li></ul><p><strong>FR-UI-SCOPE-003 Profile / Remote 场景</strong></p><ul><li><p>在 Profile / Remote 等场景中：</p><ul><li>Settings UI 应感知当前 Profile / Remote 上下文并展示对应 scope；</li><li>User / Workspace 等标签在 UI 层表现可能变化，但语义应与 Configuration Core 的层结构一致。</li></ul></li></ul><h3 id="_5-3-搜索与过滤" tabindex="-1">5.3 搜索与过滤 <a class="header-anchor" href="#_5-3-搜索与过滤" aria-label="Permalink to &quot;5.3 搜索与过滤&quot;">​</a></h3><p><strong>FR-UI-SEARCH-001 文本搜索</strong></p><ul><li><p>Settings UI 顶部搜索框必须支持按关键字搜索：</p><ul><li>匹配 setting 标题、ID、描述文本；</li><li>搜索结果应即时更新显示列表；</li><li>匹配文本可高亮显示。</li></ul></li></ul><p><strong>FR-UI-SEARCH-002 <code>@modified</code> 过滤器</strong></p><ul><li><p>搜索框必须支持 <code>@modified</code> 过滤器：</p><ul><li>只显示当前作用域下被「显式设置」或「值不同于默认值」的 settings；</li><li>该状态既来源于 Settings UI 修改，也来源于 JSON 手工编辑；</li><li>&quot;修改&quot; 的判断依赖多层模型，而不仅仅是当前层存在值。</li></ul></li></ul><p><strong>FR-UI-SEARCH-003 扩展和语言过滤</strong></p><ul><li><p>Settings UI 应支持按扩展和语言过滤，至少包括：</p><ul><li><code>@ext:&lt;extensionId&gt;</code>：只显示由某扩展贡献的 settings；</li><li><code>@lang:&lt;languageId&gt;</code>：只显示与特定语言相关的 settings；</li></ul></li><li><p>UI 中可通过 filter 按钮提供 token 列表，供用户插入。</p></li></ul><p><strong>FR-UI-SEARCH-004 组合过滤</strong></p><ul><li><p>搜索关键字与过滤器必须可组合使用，例如：</p><ul><li><code>@modified editor</code>：只显示已修改且与 editor 相关的设置；</li><li>组合语义应直观且一致。</li></ul></li></ul><h3 id="_5-4-设置项展示与编辑" tabindex="-1">5.4 设置项展示与编辑 <a class="header-anchor" href="#_5-4-设置项展示与编辑" aria-label="Permalink to &quot;5.4 设置项展示与编辑&quot;">​</a></h3><p><strong>FR-UI-ITEM-001 设置项展示内容</strong></p><ul><li><p>对每一个已注册的 setting，Settings UI 必须展示：</p><ul><li>用户可理解的标题（label）；</li><li>描述文本（description / markdownDescription 渲染后）；</li><li>当前生效值；</li><li>控件类型：布尔开关、下拉框、文本框、滑杆、color picker 等；</li><li>可选的默认值提示或占位文本；</li><li>若适用，显示该设置由哪个扩展贡献。</li></ul></li></ul><p><strong>FR-UI-ITEM-002 值来源说明</strong></p><ul><li><p>对于每个 setting，Settings UI 必须能（通过 hover / 详情面板等方式）说明当前值来自哪个层：</p><ul><li>Default / User / Workspace / Folder / Language-specific / Policy；</li><li>当 Workspace 或 Folder 覆盖 User 时，应有「当前工作区覆盖全局配置」等提示。</li></ul></li></ul><p><strong>FR-UI-ITEM-003 修改行为与即时生效</strong></p><ul><li><p>当用户在 Settings UI 中修改值时：</p><ul><li>必须通过访问与变更子系统调用 <code>update</code> 写入对应 scope 的 settings.json；</li><li>存储与分层子系统更新模型后，新值应立即在 VS Code 其他部分生效，无需重启；</li><li>若写入失败（权限 / Policy / schema 校验失败等），应向用户显示错误并回滚 UI 显示。</li></ul></li></ul><p><strong>FR-UI-ITEM-004 修改标记与重置</strong></p><ul><li><p>已修改 setting 必须有明显的修改标记；</p></li><li><p>每个 setting 应提供「重置为默认」操作：</p><ul><li>在当前 scope 删除该 setting 的显式值，使生效值回退到下层 / default；</li><li>修改标记随之更新。</li></ul></li></ul><p><strong>FR-UI-ITEM-005 Policy 锁定表现</strong></p><ul><li><p>对被政策锁定（只读或强制值）的 setting：</p><ul><li>Settings UI 应以只读形式显示控件，或禁用交互；</li><li>提供「由组织策略管理」之类的提示文本或图标。</li></ul></li></ul><h3 id="_5-5-json-编辑体验与-ui-同步" tabindex="-1">5.5 JSON 编辑体验与 UI 同步 <a class="header-anchor" href="#_5-5-json-编辑体验与-ui-同步" aria-label="Permalink to &quot;5.5 JSON 编辑体验与 UI 同步&quot;">​</a></h3><p><strong>FR-UI-JSON-001 JSON 打开入口</strong></p><ul><li>Settings UI 必须提供从当前 scope 打开 settings.json 的显式入口；</li><li>命令面板中也必须提供打开 User/Workspace 等 settings.json 的命令。</li></ul><p><strong>FR-UI-JSON-002 JSON 智能提示与校验</strong></p><ul><li><p>当 settings.json 在编辑器中打开时：</p><ul><li>必须启用与 settings schema 关联的 JSON 语言服务；</li><li>为键名提供补全，为值提供类型检查与枚举提示；</li><li>对语法错误提供下划线和错误信息。</li></ul></li></ul><p><strong>FR-UI-JSON-003 JSON 改动 → UI 同步</strong></p><ul><li><p>当用户在 settings.json 中保存变更时：</p><ul><li>存储与分层子系统更新模型并触发配置变更事件；</li><li>Settings UI 必须监听变更事件并更新对应 setting 的值与修改标记；</li><li>已打开的 Settings UI 无需重新打开即可看到最新状态。</li></ul></li></ul><p><strong>FR-UI-JSON-004 UI 改动 → JSON 同步</strong></p><ul><li><p>当用户在 UI 中修改 setting 时：</p><ul><li>写入对应 settings.json 文件；</li><li>再次打开该 JSON 时，内容必须与 UI 修改一致；</li><li>不得出现「UI 显示已修改但 JSON 中没有对应项目」的持久不一致状态。</li></ul></li></ul><h3 id="_5-6-与-settings-sync-policy-的-ui-集成" tabindex="-1">5.6 与 Settings Sync / Policy 的 UI 集成 <a class="header-anchor" href="#_5-6-与-settings-sync-policy-的-ui-集成" aria-label="Permalink to &quot;5.6 与 Settings Sync / Policy 的 UI 集成&quot;">​</a></h3><p><strong>FR-UI-EXT-001 Settings Sync 入口</strong></p><ul><li><p>Settings UI 适当位置应提供 Settings Sync 的入口：</p><ul><li>例如「开启同步」按钮或「管理 Settings Sync」链接；</li><li>具体同步流程与状态切换由 Settings Sync 系统负责。</li></ul></li></ul><p><strong>FR-UI-EXT-002 Sync 状态提示（可选）</strong></p><ul><li>对参与 / 不参与 Sync 的设置，Settings UI 可显示轻量状态提示（例如 tooltip 或图标）；</li><li>Sync 相关的 ignoreSync 信息来自声明子系统或 Sync 系统，本子系统只负责呈现。</li></ul><p><strong>FR-UI-EXT-003 Policy 状态展示</strong></p><ul><li><p>对受 Policy 影响的设置，Settings UI 必须展示锁定或覆盖状态：</p><ul><li>若值被强制，则展示「由组织设置」之类信息，禁止用户改动；</li><li>若仅为默认建议，则可提示「建议值」并允许用户覆盖。</li></ul></li></ul><h3 id="_5-7-诊断与可测试性" tabindex="-1">5.7 诊断与可测试性 <a class="header-anchor" href="#_5-7-诊断与可测试性" aria-label="Permalink to &quot;5.7 诊断与可测试性&quot;">​</a></h3><p><strong>FR-UI-DIAG-001 诊断能力</strong></p><ul><li><p>系统应提供面向开发者 / 调试场景的诊断信息，例如：</p><ul><li>最近一次配置变更来源（UI / JSON / 扩展）；</li><li>某 setting 在各层的值快照；</li><li>当前搜索 / filter 条件及其解析结果。</li></ul></li></ul><p><strong>FR-UI-DIAG-002 测试覆盖面</strong></p><ul><li><p>子系统设计必须便于以下场景的自动化测试：</p><ul><li>不同作用域下的显示与写入行为；</li><li>搜索与过滤组合；</li><li>JSON 与 UI 同步；</li><li>Policy 锁定状态展示；</li><li>多根工作区、Profile、Remote 等复杂上下文。</li></ul></li></ul><hr><h2 id="_6-非功能性需求-nfr" tabindex="-1">6. 非功能性需求（NFR） <a class="header-anchor" href="#_6-非功能性需求-nfr" aria-label="Permalink to &quot;6. 非功能性需求（NFR）&quot;">​</a></h2><h3 id="nfr-ui-01-性能" tabindex="-1">NFR-UI-01 性能 <a class="header-anchor" href="#nfr-ui-01-性能" aria-label="Permalink to &quot;NFR-UI-01 性能&quot;">​</a></h3><ul><li>打开 Settings UI 在常规配置规模和常见扩展组合下，应在可接受时间内完成，体验上应为即时或仅有轻微延迟；</li><li>搜索与过滤操作（特别是 <code>@modified</code>）应在用户键入后短时间内完成，不应明显卡顿；</li><li>从 JSON 保存设置到 UI 反映更新的延迟，应在用户可接受范围内（通常为数百毫秒级）。</li></ul><h3 id="nfr-ui-02-一致性" tabindex="-1">NFR-UI-02 一致性 <a class="header-anchor" href="#nfr-ui-02-一致性" aria-label="Permalink to &quot;NFR-UI-02 一致性&quot;">​</a></h3><ul><li><p>在任何时刻，Settings UI 与 settings.json 中的配置内容必须保持一致的语义：</p><ul><li>同一上下文下的有效值一致；</li><li>修改标记与 <code>@modified</code> 过滤结果和 JSON 是否存在显式值一致；</li></ul></li><li><p>在 update 的 Promise 完成前，不应向用户展示半写入状态。</p></li></ul><h3 id="nfr-ui-03-可用性与可发现性" tabindex="-1">NFR-UI-03 可用性与可发现性 <a class="header-anchor" href="#nfr-ui-03-可用性与可发现性" aria-label="Permalink to &quot;NFR-UI-03 可用性与可发现性&quot;">​</a></h3><ul><li>打开 Settings 的入口应在菜单、命令面板和界面上清晰可见；</li><li>初级用户无需理解 settings.json 即可完成常见配置；</li><li>高级用户应能轻松发现 JSON 编辑入口和 <code>workbench.settings.editor</code> 设置。</li></ul><h3 id="nfr-ui-04-无障碍-a11y" tabindex="-1">NFR-UI-04 无障碍（A11y） <a class="header-anchor" href="#nfr-ui-04-无障碍-a11y" aria-label="Permalink to &quot;NFR-UI-04 无障碍（A11y）&quot;">​</a></h3><ul><li>Settings UI 必须支持完整的键盘导航；</li><li>所有控件应有合理的 aria label 与角色，支持屏幕阅读器；</li><li>颜色、对比度、焦点状态等满足 VS Code 全局无障碍规范。</li></ul><h3 id="nfr-ui-05-国际化-i18n" tabindex="-1">NFR-UI-05 国际化（i18n） <a class="header-anchor" href="#nfr-ui-05-国际化-i18n" aria-label="Permalink to &quot;NFR-UI-05 国际化（i18n）&quot;">​</a></h3><ul><li>所有面向用户的文本均可本地化；</li><li>Setting ID 等内部标识保持英文不变，UI 使用本地化标题和描述。</li></ul><hr><h2 id="_7-典型用例" tabindex="-1">7. 典型用例 <a class="header-anchor" href="#_7-典型用例" aria-label="Permalink to &quot;7. 典型用例&quot;">​</a></h2><h3 id="uc-ui-01" tabindex="-1">UC-UI-01 普通用户通过 UI 修改设置 <a class="header-anchor" href="#uc-ui-01" aria-label="Permalink to &quot;UC-UI-01 普通用户通过 UI 修改设置 {#uc-ui-01}&quot;">​</a></h3><ul><li>用户使用快捷键打开 Settings UI；</li><li>在搜索框中输入关键字（如 “font size”）；</li><li>切换到 User 作用域，修改字体大小 setting；</li><li>修改立即生效，条目左侧出现修改标记；输入 <code>@modified</code> 后可筛选出该 setting。</li></ul><h3 id="uc-ui-02" tabindex="-1">UC-UI-02 团队通过 Workspace 设置共享配置 <a class="header-anchor" href="#uc-ui-02" aria-label="Permalink to &quot;UC-UI-02 团队通过 Workspace 设置共享配置 {#uc-ui-02}&quot;">​</a></h3><ul><li>团队在仓库中维护 <code>.vscode/settings.json</code>；</li><li>成员打开项目，打开 Settings UI 并切换到 Workspace 视图；</li><li>在 Workspace 视图下修改格式化相关设置，写入 <code>.vscode/settings.json</code>；</li><li>所有团队成员在该仓库下获得统一的 workspace 设置。</li></ul><h3 id="uc-ui-03" tabindex="-1">UC-UI-03 高级用户在 UI 与 JSON 之间切换 <a class="header-anchor" href="#uc-ui-03" aria-label="Permalink to &quot;UC-UI-03 高级用户在 UI 与 JSON 之间切换 {#uc-ui-03}&quot;">​</a></h3><ul><li>用户在 Settings UI 中看到部分设置不易批量编辑；</li><li>点击 UI 顶部的 JSON 按钮打开 User settings.json；</li><li>使用 IntelliSense 补全 setting ID 和枚举值，批量复制粘贴配置；</li><li>保存后返回 Settings UI，相关 setting 的值和修改标记已更新。</li></ul><h3 id="uc-ui-04" tabindex="-1">UC-UI-04 企业策略下的锁定设置 <a class="header-anchor" href="#uc-ui-04" aria-label="Permalink to &quot;UC-UI-04 企业策略下的锁定设置 {#uc-ui-04}&quot;">​</a></h3><ul><li>企业通过 Policy 系统强制某些隐私相关设置为特定值；</li><li>用户在 Settings UI 中看到这些设置被标记为「由组织管理」，控件禁用；</li><li>即使尝试在 JSON 中修改对应 setting，写入被拒绝或不影响有效值，Settings UI 继续展示策略值和锁定状态。</li></ul><hr>',119)])])}const h=l(n,[["render",s]]);export{p as __pageData,h as default};
