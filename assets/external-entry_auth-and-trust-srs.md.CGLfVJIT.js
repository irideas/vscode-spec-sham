import{_ as a,c as r,o as l,ae as t}from"./chunks/framework.B_lm770W.js";const _=JSON.parse('{"title":"外部入口安全与信任 SRS（平台供给域）","description":"","frontmatter":{},"headers":[],"relativePath":"external-entry/auth-and-trust-srs.md","filePath":"external-entry/auth-and-trust-srs.md","lastUpdated":1765349849000}'),i={name:"external-entry/auth-and-trust-srs.md"};function o(n,e,s,d,h,u){return l(),r("div",null,[...e[0]||(e[0]=[t('<h1 id="外部入口安全与信任-srs-平台供给域" tabindex="-1">外部入口安全与信任 SRS（平台供给域） <a class="header-anchor" href="#外部入口安全与信任-srs-平台供给域" aria-label="Permalink to &quot;外部入口安全与信任 SRS（平台供给域）&quot;">​</a></h1><p>定义 URI/外部入口在安全、身份、信任方面的硬性事实约束。适用于所有消费方（Tree/Editor/Webview/Terminal/Debug 等），消费侧需遵守本章约束并在各自域内补充 UI/业务细节。</p><h2 id="_1-范围与基线" tabindex="-1">1. 范围与基线 <a class="header-anchor" href="#_1-范围与基线" aria-label="Permalink to &quot;1. 范围与基线&quot;">​</a></h2><ul><li>基线与 <a href="/vscode-spec-sham/external-entry/uri-and-links-srs.html">uri-and-links-srs</a> 一致：<code>engines.vscode</code> ≥ 1.80，覆盖 Desktop/Remote/Web/Codespaces。</li><li>范围：入口参数与协议约束、认证/授权、破坏性操作确认、隐私与日志、Remote/Web 差异。</li><li>非范围：具体业务权限模型、消费侧 UI 流（由各域定义）。</li></ul><h2 id="_2-威胁与假设" tabindex="-1">2. 威胁与假设 <a class="header-anchor" href="#_2-威胁与假设" aria-label="Permalink to &quot;2. 威胁与假设&quot;">​</a></h2><ul><li>假设入口 URI 可被用户分享或被外部系统生成，存在篡改、重放、误触风险。</li><li>Remote/Web/Codespaces 可能经过反向代理/隧道，不能假定源 IP 可信。</li><li>多窗口/多实例下，Handler 仅保证当前实例接收，不保证广播。</li></ul><h2 id="_3-安全与信任硬性要求" tabindex="-1">3. 安全与信任硬性要求 <a class="header-anchor" href="#_3-安全与信任硬性要求" aria-label="Permalink to &quot;3. 安全与信任硬性要求&quot;">​</a></h2><ol><li><strong>参数与解析</strong>：必须使用 <code>URL/URLSearchParams</code> 解析；仅接受白名单字段，校验类型/长度/必填，禁止直接拼接为 Shell/文件路径。</li><li><strong>认证/授权</strong>：入口如需身份，应携带签名/一次性 token 或设备码，并校验过期/重放（nonce/ttl）；缺失或校验失败必须拒绝并提示。</li><li><strong>破坏性操作确认</strong>：删除/覆盖/推送/执行外部副作用的入口必须在消费侧弹出明确确认对话框；无提示执行视为违规。</li><li><strong>隐私与日志</strong>：敏感信息（token/凭证/个人数据）不得出现在可共享 URI、提示、日志；必要日志需脱敏。</li><li><strong>最小权限</strong>：入口调用的命令/服务应符合最小权限原则；禁止通过入口绕过既有授权链路。</li><li><strong>Remote/Web 差异</strong>：对经 <code>asExternalUri</code> 重写的 URI，应同样执行上述校验；不得因运行环境不同而放宽检查。</li><li><strong>错误反馈</strong>: 校验失败、权限不足、资源不存在时必须向用户提示（错误/警告），不可静默丢弃。</li><li><strong>缓存与清理</strong>：处理完毕后应清理临时凭证/状态，避免被后续窗口复用。</li></ol><h2 id="_4-兼容性与边界" tabindex="-1">4. 兼容性与边界 <a class="header-anchor" href="#_4-兼容性与边界" aria-label="Permalink to &quot;4. 兼容性与边界&quot;">​</a></h2><ul><li>旧引擎或无 <code>asExternalUri</code> 的环境，入口能力可能受限；扩展需检测并提示不支持。</li><li>无法确认来源可信时，默认低信任：只允许无副作用操作或要求用户确认。</li><li>URI Handler 不应承担持久会话管理，长生命周期凭证应交由 SecretStorage/账户系统。</li></ul><h2 id="_5-质量与实践基线-占位" tabindex="-1">5. 质量与实践基线（占位） <a class="header-anchor" href="#_5-质量与实践基线-占位" aria-label="Permalink to &quot;5. 质量与实践基线（占位）&quot;">​</a></h2><ul><li>安全/可靠性/兼容性指标后续补充，当前请遵循上文硬性要求与 /external-entry/uri-and-links-srs 的平台约束。</li></ul><h2 id="_6-用例映射-引用" tabindex="-1">6. 用例映射（引用） <a class="header-anchor" href="#_6-用例映射-引用" aria-label="Permalink to &quot;6. 用例映射（引用）&quot;">​</a></h2><ul><li><strong>UC-URI-03</strong>（OAuth/设备登录）：必须校验签名/过期，并在写入凭据前确认账户切换风险。</li><li><strong>UC-URI-02/05/06</strong>（分享/深链）：分享链接不得包含敏感信息；落点前必须确认高风险动作。</li><li>其他消费方（Editor/Webview/Terminal/Debug）遵循同样的入口校验与确认要求。</li></ul><h2 id="_7-未来演进-非当前事实" tabindex="-1">7. 未来演进（非当前事实） <a class="header-anchor" href="#_7-未来演进-非当前事实" aria-label="Permalink to &quot;7. 未来演进（非当前事实）&quot;">​</a></h2><ul><li>统一的入口签名/nonce SDK，或系统级“高风险入口”提示。</li><li>多实例/多租户的入口路由与隔离策略。</li></ul>',16)])])}const m=a(i,[["render",o]]);export{_ as __pageData,m as default};
