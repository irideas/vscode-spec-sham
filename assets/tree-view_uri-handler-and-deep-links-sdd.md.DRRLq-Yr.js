import{_ as r,c as a,o as l,ae as i}from"./chunks/framework.B_lm770W.js";const m=JSON.parse('{"title":"URI Handler & Deep Links（Tree View 桥接摘要 SDD）","description":"","frontmatter":{},"headers":[],"relativePath":"tree-view/uri-handler-and-deep-links-sdd.md","filePath":"tree-view/uri-handler-and-deep-links-sdd.md","lastUpdated":1765187623000}'),d={name:"tree-view/uri-handler-and-deep-links-sdd.md"};function n(o,e,t,s,c,u){return l(),a("div",null,[...e[0]||(e[0]=[i('<h1 id="uri-handler-deep-links-tree-view-桥接摘要-sdd" tabindex="-1">URI Handler &amp; Deep Links（Tree View 桥接摘要 SDD） <a class="header-anchor" href="#uri-handler-deep-links-tree-view-桥接摘要-sdd" aria-label="Permalink to &quot;URI Handler &amp; Deep Links（Tree View 桥接摘要 SDD）&quot;">​</a></h1><p>本文件聚焦 Tree View 与外部入口协同时的设计建议，平台级协议、安全、Remote/Web 行为已迁移至 <code>docs/external-entry</code> 生态。读者应先阅读 <code>../external-entry/uri-and-links-srs.md</code> / <code>uri-and-links-sdd.md</code>，再结合本摘要落地 Tree 侧实现。</p><h2 id="_1-定位与关联" tabindex="-1">1. 定位与关联 <a class="header-anchor" href="#_1-定位与关联" aria-label="Permalink to &quot;1. 定位与关联&quot;">​</a></h2><ul><li><strong>定位</strong>：Tree 侧的“入站深链”与“节点分享”设计建议；不复述 URI 解析、安全、路由的通用模式。</li><li><strong>关联文档</strong>：<code>../external-entry/uri-and-links-sdd.md</code>（主设计）、<code>../external-entry/auth-and-trust-*.md</code>（安全占位）、<code>../external-entry/remote-routing-*.md</code>（Remote/Web 占位）。</li></ul><h2 id="_2-协作架构概览" tabindex="-1">2. 协作架构概览 <a class="header-anchor" href="#_2-协作架构概览" aria-label="Permalink to &quot;2. 协作架构概览&quot;">​</a></h2><ul><li><strong>进程边界</strong>：Handler/Provider 均在 Extension Host 运行，Tree 渲染在 Workbench，通过 RPC 交互，不可直接操作 UI。</li><li><strong>调用链</strong>：URI/命令 → 业务服务解析/校验 → Provider 查找节点 → <code>TreeView.reveal</code> → 上下文键同步 → 菜单/快捷键可用。</li><li><strong>容器/视图切换</strong>：在执行 reveal 之前，必要时通过 <code>workbench.view.extension.&lt;container&gt;</code> 将视图置于可见位置，避免 reveal 静默失败。</li></ul><h2 id="_3-推荐实现模式-tree-侧投影" tabindex="-1">3. 推荐实现模式（Tree 侧投影） <a class="header-anchor" href="#_3-推荐实现模式-tree-侧投影" aria-label="Permalink to &quot;3. 推荐实现模式（Tree 侧投影）&quot;">​</a></h2><ol><li><strong>模式 A：Handler→Service→Reveal（单节点落点）</strong><ul><li>Handler 只做解析与安全校验，把业务交给 Service；Service 基于稳定主键查找节点，不依赖 UI 选中状态。</li><li>Reveal 失败时提供用户可理解的提示或 fallback（例如打开搜索视图）。</li></ul></li><li><strong>模式 B：节点分享链接生成器</strong><ul><li>菜单/命令收集视图/节点 ID、过滤条件，使用 <code>vscode.env.uriScheme</code> 构造深链；写入剪贴板并提示。</li><li>生成的 URI 与平台级规范保持一致（<code>URLSearchParams</code>，必要时签名/一次性 token 见外部入口安全文档）。</li></ul></li><li><strong>模式 C：批量/异步落点</strong><ul><li>对 UC-URI-04 等批量跳转，采用队列/节流，避免在 Handler 中并发重 IO；按序 reveal 或聚合为一个命令执行。</li><li>大量节点时可先定位父节点再局部展开，减少多次刷新。</li></ul></li></ol><h2 id="_4-反模式提醒" tabindex="-1">4. 反模式提醒 <a class="header-anchor" href="#_4-反模式提醒" aria-label="Permalink to &quot;4. 反模式提醒&quot;">​</a></h2><ul><li>在 Handler 中直接操作 TreeItem/全量刷新，导致性能波动或 UI 闪烁；应通过 Service + <code>onDidChangeTreeData</code> 控制刷新粒度。</li><li>硬编码 <code>vscode://</code> 或视图容器 ID，导致在 Insiders/Remote/Web 环境下失效；应依赖 <code>uriScheme</code> 与配置/上下文键。</li><li>将安全校验放在 Provider 中而非 Handler/Service，易出现“先执行了副作用再报错”的问题。</li></ul><h2 id="_5-tree-侧待演进-占位" tabindex="-1">5. Tree 侧待演进/占位 <a class="header-anchor" href="#_5-tree-侧待演进-占位" aria-label="Permalink to &quot;5. Tree 侧待演进/占位&quot;">​</a></h2><ul><li>若未来扩展需要在 Tree 上展示“深链落点路径 breadcrumb”或“批量结果列表”，可在此补充 UI/交互模式；平台级入口的新增特性继续沉淀在 <code>docs/external-entry</code> 域。</li></ul>',12)])])}const _=r(d,[["render",n]]);export{m as __pageData,_ as default};
