<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>VS Code Configuration 声明子系统需求规格说明书 (SRS) | VS Code 规格与设计</title>
    <meta name="description" content="以“假装 Visual Studio Code 官方团队”的身份，汇总关键能力的事实需求（SRS）与设计指导（SDD）">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/vscode-spec-sham/assets/style.BfVI2hHj.css" as="style">
    <link rel="preload stylesheet" href="/vscode-spec-sham/vp-icons.css" as="style">
    
    <script type="module" src="/vscode-spec-sham/assets/app.DKZdt2QG.js"></script>
    <link rel="preload" href="/vscode-spec-sham/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/vscode-spec-sham/assets/chunks/theme.W39VjVAK.js">
    <link rel="modulepreload" href="/vscode-spec-sham/assets/chunks/framework.B_lm770W.js">
    <link rel="modulepreload" href="/vscode-spec-sham/assets/configuration-system_configuration-declaration-srs.md.B2x3MdhG.lean.js">
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/vscode-spec-sham/" data-v-1168a8e4><!--[--><!--]--><!----><span data-v-1168a8e4>VS Code 规格与设计</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/vscode-spec-sham/tree-view/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Tree View 生态</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/vscode-spec-sham/external-entry/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>外部入口与集成</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/vscode-spec-sham/configuration-system/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Configuration 系统</span><!--]--></a><!--]--><!--]--></nav><!----><!----><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/irideas/vscode-spec-sham" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><!----><!----><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/irideas/vscode-spec-sham" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-8a42e2b4><button data-v-8a42e2b4>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>Configuration 系统</h2><!----></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vscode-spec-sham/configuration-system/" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>章节总览</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>体系总览</h2><!----></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vscode-spec-sham/configuration-system/configuration-core-srs.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>事实需求 SRS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vscode-spec-sham/configuration-system/configuration-core-sdd.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>设计指导 SDD</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 has-active" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>声明子系统</h2><!----></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vscode-spec-sham/configuration-system/configuration-declaration-srs.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>事实需求 SRS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vscode-spec-sham/configuration-system/configuration-declaration-sdd.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>设计指导 SDD</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>存储与分层子系统</h2><!----></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vscode-spec-sham/configuration-system/configuration-storage-layering-srs.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>事实需求 SRS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vscode-spec-sham/configuration-system/configuration-storage-layering-sdd.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>设计指导 SDD</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>访问与变更子系统</h2><!----></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vscode-spec-sham/configuration-system/configuration-access-update-srs.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>事实需求 SRS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vscode-spec-sham/configuration-system/configuration-access-update-sdd.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>设计指导 SDD</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>Settings UI 子系统</h2><!----></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vscode-spec-sham/configuration-system/configuration-settings-ui-srs.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>事实需求 SRS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/vscode-spec-sham/configuration-system/configuration-settings-ui-sdd.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>设计指导 SDD</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _vscode-spec-sham_configuration-system_configuration-declaration-srs" data-v-39a288b8><div><h1 id="vs-code-configuration-声明子系统需求规格说明书-srs" tabindex="-1">VS Code Configuration 声明子系统需求规格说明书 (SRS) <a class="header-anchor" href="#vs-code-configuration-声明子系统需求规格说明书-srs" aria-label="Permalink to &quot;VS Code Configuration 声明子系统需求规格说明书 (SRS)&quot;">​</a></h1><h2 id="_1-引言" tabindex="-1">1. 引言 <a class="header-anchor" href="#_1-引言" aria-label="Permalink to &quot;1. 引言&quot;">​</a></h2><h3 id="_1-1-目的" tabindex="-1">1.1 目的 <a class="header-anchor" href="#_1-1-目的" aria-label="Permalink to &quot;1.1 目的&quot;">​</a></h3><p>本《软件需求规格说明书》（SRS）定义 <strong>Configuration 声明子系统</strong> 的需求规范，用于：</p><ul><li>统一 VS Code 核心与扩展生态中的 <strong>Setting 声明模型与约束</strong>；</li><li>为 Settings UI、配置存储与解析、扩展 API、<strong>Settings Sync 系统（外部系统）</strong>、<strong>Enterprise Policy 系统（外部系统）</strong> 提供 <strong>稳定的元数据来源</strong>；</li><li>作为 Configuration Core 内部其他子系统（存储与分层、访问与变更、Settings UI）的基础设施。</li></ul><p>本子系统关注：</p><blockquote><p>“<strong>定义有什么设置（有哪些 Setting）、长什么样（Schema 与元数据）</strong>”</p></blockquote><p><strong>不</strong>负责设置值本身的存储、合并或读写。</p><h3 id="_1-4-非目标-non-goals" tabindex="-1">1.4 非目标（Non-Goals） <a class="header-anchor" href="#_1-4-非目标-non-goals" aria-label="Permalink to &quot;1.4 非目标（Non-Goals）&quot;">​</a></h3><ul><li>Settings Sync 协议、冲突解决与云端存储不在本子系统内；</li><li>Enterprise Policy 的解析、下发、审计流程不在本子系统内；</li><li>settings 值的存储位置、层叠合并与 API 访问语义由其他子系统负责；</li><li>JSON 语言服务的内部实现不在本子系统内（仅输出 Schema 供其使用）。</li></ul><hr><h2 id="_2-基线与引用" tabindex="-1">2. 基线与引用 <a class="header-anchor" href="#_2-基线与引用" aria-label="Permalink to &quot;2. 基线与引用&quot;">​</a></h2><ul><li>基线：默认 <code>engines.vscode</code> ≥ 1.80；需兼顾 Remote/Web/Profiles/Policy 等场景的 schema 元数据消费。</li><li>官方参考：VS Code Contribution Points 文档（<code>contributes.configuration</code>、<code>configurationDefaults</code>），VS Code API 中 Configuration 章节，Settings UI、Settings Sync、Enterprise Policy 文档。</li><li>站内引用：/configuration-system/configuration-core-srs（体系级定义）、/configuration-system/configuration-storage-layering-srs（default settings 与层叠）、/configuration-system/configuration-access-update-srs（API 行为）、/configuration-system/configuration-settings-ui-srs（UI 呈现）。</li></ul><h3 id="_1-2-系统范围-scope" tabindex="-1">1.2 系统范围（Scope） <a class="header-anchor" href="#_1-2-系统范围-scope" aria-label="Permalink to &quot;1.2 系统范围（Scope）&quot;">​</a></h3><p>本子系统覆盖：</p><ul><li>VS Code 核心内置设置的声明与注册；</li><li>扩展在 <code>package.json</code> 中通过 <code>contributes.configuration</code> 声明的设置；</li><li>所有 Setting 声明对应的 JSON Schema（类型、默认值、枚举、描述、scope 等）；</li><li>Configuration Schema Registry / Configuration Defaults Registry 的管理与查询能力；</li><li>用于 Settings UI、JSON Settings 编辑器的 Schema 暴露。</li></ul><p><strong>不在本子系统范围内</strong> 的内容（由其他子系统或外部系统负责）：</p><ul><li><code>settings.json</code> 的物理存储位置、分层与合并规则 （由「存储与分层子系统」负责）；</li><li><code>workspace.getConfiguration()</code> 等访问与变更 API （由「访问与变更子系统」负责）；</li><li>Settings UI 的呈现逻辑与交互细节 （由 Settings UI 子系统负责）；</li><li><strong>Settings Sync 系统</strong> 的同步协议/冲突解决/跨设备合并逻辑（外部系统）；</li><li><strong>Enterprise Policy 系统</strong> 的策略解析、注入与合规逻辑（外部系统）。</li></ul><blockquote><p>共识：Settings Sync 与 Enterprise Policy <strong>使用本子系统的元数据</strong>，但<strong>不属于 Configuration Core 的子系统</strong>。</p></blockquote><h3 id="_1-3-目标读者" tabindex="-1">1.3 目标读者 <a class="header-anchor" href="#_1-3-目标读者" aria-label="Permalink to &quot;1.3 目标读者&quot;">​</a></h3><ul><li>VS Code 核心开发者 / Configuration 系统架构师；</li><li>VS Code 扩展开发者（尤其是对配置有复杂需求的扩展作者）；</li><li>负责 Settings UI、Settings Sync、Enterprise Policy 等相关系统的实现者；</li><li>技术文档撰写者与规范维护者。</li></ul><hr><h2 id="_3-在-configuration-系统中的位置与外部关系" tabindex="-1">3. 在 Configuration 系统中的位置与外部关系 <a class="header-anchor" href="#_3-在-configuration-系统中的位置与外部关系" aria-label="Permalink to &quot;3. 在 Configuration 系统中的位置与外部关系&quot;">​</a></h2><h3 id="_3-1-在-configuration-core-中的位置" tabindex="-1">3.1 在 Configuration Core 中的位置 <a class="header-anchor" href="#_3-1-在-configuration-core-中的位置" aria-label="Permalink to &quot;3.1 在 Configuration Core 中的位置&quot;">​</a></h3><p>Configuration 声明子系统是 <strong>Configuration Core 的 4 个子系统之一</strong>，负责“<strong>配置元数据层</strong>”：</p><ul><li><p>与 <strong>存储与分层子系统</strong>：</p><ul><li>提供 default configuration（默认设置）与类型信息，作为配置模型的输入；</li></ul></li><li><p>与 <strong>访问与变更子系统</strong>：</p><ul><li>提供 Setting Schema（类型、scope、默认值、废弃信息等），用于 <code>inspect</code> / <code>update</code> 等 API 的校验与行为；</li></ul></li><li><p>与 <strong>Settings UI 子系统</strong>：</p><ul><li>提供“所有设置的分类结构 + 元数据”，用于渲染设置树、表单控件、工具提示等；</li></ul></li></ul><blockquote><p>核心定位一句话： <strong>“把 VS Code 核心与所有扩展的设置声明，汇总成一个统一的 Configuration Schema Registry，并对外提供查询与 Schema 源能力。”</strong></p></blockquote><h3 id="_3-2-与其他内部子系统的关系" tabindex="-1">3.2 与其他内部子系统的关系 <a class="header-anchor" href="#_3-2-与其他内部子系统的关系" aria-label="Permalink to &quot;3.2 与其他内部子系统的关系&quot;">​</a></h3><ul><li><p><strong>存储与分层子系统</strong></p><ul><li>使用 Schema 中的 <code>default</code>、<code>scope</code>、<code>ignoreSync</code> 等信息构建 defaultSettings 模型；</li><li>在写入过程中可根据类型信息进行基本校验。</li></ul></li><li><p><strong>访问与变更子系统</strong></p><ul><li>使用 Setting Schema 解析 <code>inspect()</code> 的多层值（默认值、用户、工作区、文件夹等）；</li><li>在 <code>update()</code> 前做类型与 scope 合规性检查。</li></ul></li><li><p><strong>Settings UI 子系统</strong></p><ul><li>使用 Category / Setting 列表构建 UI；</li><li>使用描述、枚举、tags 等信息决定控件类型、排序与展示样式。</li></ul></li></ul><h3 id="_3-3-与外部系统-sync-policy-的关系" tabindex="-1">3.3 与外部系统（Sync / Policy）的关系 <a class="header-anchor" href="#_3-3-与外部系统-sync-policy-的关系" aria-label="Permalink to &quot;3.3 与外部系统（Sync / Policy）的关系&quot;">​</a></h3><ul><li><p><strong>Settings Sync 系统（外部系统）</strong></p><ul><li><p>使用 Schema 元数据判断：</p><ul><li>某设置是否属于 “settings 资源”；</li><li>是否应参与同步（例如 machine-only 设置默认不参与同步）。</li></ul></li><li><p>Sync 系统本身是 Configuration Core 外部的系统，本子系统只负责提供元数据视图，不关心其内部协议实现。</p></li></ul></li><li><p><strong>Enterprise Policy 系统（外部系统）</strong></p><ul><li><p>使用 Schema 中的 key 列表、类型信息以及额外标记（如 ignoreSync、policyCapable）：</p><ul><li>决定哪些 Setting 可以被策略覆盖；</li><li>为策略编辑器提供字段与类型基础。</li></ul></li><li><p>Policy 系统负责从 ADMX / MDM / JSON policy 读取策略并注入配置解析链，本子系统仅提供 “可被管理的设置类型” 的说明。</p></li></ul></li></ul><hr><h2 id="_4-核心概念与数据模型-概念层" tabindex="-1">4. 核心概念与数据模型（概念层） <a class="header-anchor" href="#_4-核心概念与数据模型-概念层" aria-label="Permalink to &quot;4. 核心概念与数据模型（概念层）&quot;">​</a></h2><h3 id="_4-1-configuration-contribution-与配置类别" tabindex="-1">4.1 Configuration Contribution 与配置类别 <a class="header-anchor" href="#_4-1-configuration-contribution-与配置类别" aria-label="Permalink to &quot;4.1 Configuration Contribution 与配置类别&quot;">​</a></h3><ul><li><p><strong>Configuration Contribution（配置声明）</strong></p><p>指扩展在 <code>package.json</code> 的 <code>contributes.configuration</code> 字段中，声明的一组 Setting 类别与属性。</p></li><li><p><strong>Configuration Category（配置类别）</strong></p><p><code>configuration</code> 字段可以是单个对象，也可以是对象数组。每个对象代表一个类别，包含：</p><ul><li><code>title</code>：类别标题，在 Settings UI 左侧树或扩展设置页显示；</li><li><code>properties</code>：该类别下的 Setting 定义集合（key 为 Setting ID）。</li></ul></li></ul><h3 id="_4-2-setting-schema-设置模式" tabindex="-1">4.2 Setting Schema（设置模式） <a class="header-anchor" href="#_4-2-setting-schema-设置模式" aria-label="Permalink to &quot;4.2 Setting Schema（设置模式）&quot;">​</a></h3><p>每个 Setting（property）在 Schema 中至少包含：</p><ul><li><code>type</code>： <code>&quot;string&quot; | &quot;boolean&quot; | &quot;number&quot; | &quot;integer&quot; | &quot;array&quot; | &quot;object&quot;</code> 或这些的联合；</li><li><code>default</code>： 默认值，用于 defaultSettings 与 UI 展示；</li><li><code>description</code> / <code>markdownDescription</code>： 文本描述 / Markdown 描述；</li><li><code>scope</code>： 作用域，如 <code>resource</code> / <code>window</code> / <code>application</code> / <code>machine</code> / <code>machine-overridable</code> 等；</li><li><code>enum</code> / <code>enumDescriptions</code> / <code>markdownEnumDescriptions</code>： 枚举值与说明；</li><li><code>tags</code>： 如 <code>[&quot;usesOnlineServices&quot;]</code>，标记该设置会访问在线服务；</li><li><code>ignoreSync</code>： 布尔值，标明该设置不应参与 Settings Sync；</li><li><code>deprecationMessage</code> / <code>markdownDeprecationMessage</code>： 用于标记废弃设置及替代方案。</li></ul><p>此外支持 JSON Schema 子集：<code>minimum</code>/<code>maximum</code>/<code>pattern</code>/<code>items</code>/<code>properties</code> 等。</p><h3 id="_4-3-setting-id-设置-id" tabindex="-1">4.3 Setting ID（设置 ID） <a class="header-anchor" href="#_4-3-setting-id-设置-id" aria-label="Permalink to &quot;4.3 Setting ID（设置 ID）&quot;">​</a></h3><ul><li><code>properties</code> 中的每个 key（如 <code>editor.fontSize</code>、<code>git.alwaysSignOff</code>）是 Setting 的 <strong>全局 ID</strong>；</li><li>推荐命名约定：<code>extensionId.sectionName.settingName</code>，避免与其他扩展冲突。</li><li>在全局范围内，Setting ID 与其类型组合应保持一致；类型冲突视为错误或至少产生诊断信息。</li></ul><h3 id="_4-4-configuration-registry-配置注册表" tabindex="-1">4.4 Configuration Registry（配置注册表） <a class="header-anchor" href="#_4-4-configuration-registry-配置注册表" aria-label="Permalink to &quot;4.4 Configuration Registry（配置注册表）&quot;">​</a></h3><ul><li>统一存储所有 Setting ID 与其 Schema；</li><li>提供按 ID、按扩展、按类别的查询接口；</li><li>作为 Settings UI / JSON 语言服务 / Configuration Service 的 Schema 源。</li></ul><p>（详细数据结构见 SDD 第 2 章。）</p><h3 id="_4-5-configurationdefaults-默认值覆盖" tabindex="-1">4.5 configurationDefaults（默认值覆盖） <a class="header-anchor" href="#_4-5-configurationdefaults-默认值覆盖" aria-label="Permalink to &quot;4.5 configurationDefaults（默认值覆盖）&quot;">​</a></h3><ul><li><p>Manifest 中的 <code>contributes.configurationDefaults</code> 用于为现有 Setting 提供新的默认值，或语言特定默认值（如 <code>&quot;[markdown]&quot;</code>）。</p></li><li><p>声明子系统负责：</p><ul><li>校验目标 key 是否是合法 Setting ID；</li><li>将这些 override 注册到 Default Configuration 模型中，供存储与分层子系统合并。</li></ul></li></ul><hr><h2 id="_5-功能性需求-fr" tabindex="-1">5. 功能性需求（FR） <a class="header-anchor" href="#_5-功能性需求-fr" aria-label="Permalink to &quot;5. 功能性需求（FR）&quot;">​</a></h2><h3 id="_5-1-核心设置声明-core-settings" tabindex="-1">5.1 核心设置声明（Core Settings） <a class="header-anchor" href="#_5-1-核心设置声明-core-settings" aria-label="Permalink to &quot;5.1 核心设置声明（Core Settings）&quot;">​</a></h3><p><strong>FR-DECL-CORE-001 内置设置声明</strong></p><ul><li><p>VS Code 核心模块必须通过内部机制在 Configuration Registry 中声明自己的 Setting：</p><ul><li>每个 Setting 必须有唯一 ID、类型与默认值；</li><li>推荐提供 <code>description</code> / <code>markdownDescription</code>。</li></ul></li></ul><p><strong>FR-DECL-CORE-002 默认设置视图生成</strong></p><ul><li><p>声明子系统必须支持为「存储与分层子系统」生成 Default Settings 视图：</p><ul><li>作为 <code>defaultSettings.json</code> 的数据来源；</li><li>作为 Settings UI 中“只读默认值参考”的基础。</li></ul></li></ul><h3 id="_5-2-扩展设置声明接入与注册-extension-settings" tabindex="-1">5.2 扩展设置声明接入与注册（Extension Settings） <a class="header-anchor" href="#_5-2-扩展设置声明接入与注册-extension-settings" aria-label="Permalink to &quot;5.2 扩展设置声明接入与注册（Extension Settings）&quot;">​</a></h3><p><strong>FR-DECL-EXT-001 解析 Manifest 中的 configuration 声明</strong></p><ul><li>系统必须能从每个扩展的 <code>package.json</code> 中解析 <code>contributes.configuration</code>（单对象或数组）并加载。</li></ul><p><strong>FR-DECL-EXT-002 多类别支持</strong></p><ul><li><p>当 <code>configuration</code> 为数组时，系统应将每个元素视为一个独立类别：</p><ul><li>分别注册其 <code>title</code> 与 <code>properties</code>；</li><li>在 Settings UI 中按类别展示。</li></ul></li></ul><p><strong>FR-DECL-EXT-003 Schema 合法性校验</strong></p><ul><li><p>对每个 Setting Schema，需要至少执行以下校验：</p><ul><li>必须声明 <code>type</code>，否则视为错误；</li><li>若声明 <code>default</code>，其值必须与 <code>type</code> 兼容；</li><li>若声明 <code>enum</code>，<code>default</code> 必须属于枚举集合；</li><li>若声明 <code>scope</code>，其值必须属于受支持枚举之一；</li><li>若声明 <code>ignoreSync</code>，必须是布尔值。</li></ul></li></ul><p><strong>FR-DECL-EXT-004 Setting ID 唯一性与冲突处理</strong></p><ul><li><p>对于同一扩展，Setting ID 不得重复；</p></li><li><p>在全局范围内，不允许两个扩展对同一 Setting ID 提供 <strong>类型不兼容</strong> 的定义：</p><ul><li>发生冲突时，系统应记录诊断信息；</li><li>可按“先加载者优先”的策略选择有效定义，但必须在开发者工具中给出清晰警告。</li></ul></li></ul><p><strong>FR-DECL-EXT-005 热注册与卸载</strong></p><ul><li>当扩展安装 / 启用时，其配置声明必须可被动态解析并注册到 Registry；</li><li>当扩展卸载 / 禁用时，应支持从 Registry 中移除或标记该扩展贡献的设置为不可用。</li></ul><h3 id="_5-3-schema-能力与对外暴露-schema-ui-工具集成" tabindex="-1">5.3 Schema 能力与对外暴露（Schema &amp; UI/工具集成） <a class="header-anchor" href="#_5-3-schema-能力与对外暴露-schema-ui-工具集成" aria-label="Permalink to &quot;5.3 Schema 能力与对外暴露（Schema &amp; UI/工具集成）&quot;">​</a></h3><p><strong>FR-DECL-SCHEMA-010 JSON Schema 子集支持</strong></p><ul><li>Setting Schema 至少应支持 JSON Schema 的以下子集： <code>type</code>、<code>anyOf</code>、<code>enum</code>、<code>minimum</code>、<code>maximum</code>、<code>pattern</code>、<code>items</code>、<code>properties</code> 等。</li></ul><p><strong>FR-DECL-SCHEMA-011 VS Code 特有字段支持</strong></p><ul><li><p>必须支持并保留以下 VS Code 扩展字段：</p><ul><li><code>markdownDescription</code></li><li><code>enumDescriptions</code> / <code>markdownEnumDescriptions</code></li><li><code>scope</code></li><li><code>deprecationMessage</code> / <code>markdownDeprecationMessage</code></li><li><code>tags</code>、<code>order</code> 等</li><li>将来可扩展的 UI 元数据（如 <code>advanced</code> 标记）</li></ul></li></ul><p><strong>FR-DECL-SCHEMA-020 为 Settings UI 提供 Schema</strong></p><ul><li><p>系统必须能将所有 Category / Setting 映射为 Settings UI 可用模型，包括：</p><ul><li>分类结构（类别标题、扩展来源等）；</li><li>每个 Setting 的类型、默认值、描述、scope；</li><li><code>tags</code>、<code>deprecationMessage</code>、<code>order</code> 等附加元数据。</li></ul></li></ul><p><strong>FR-DECL-SCHEMA-021 为 JSON Settings 提供 JSON Schema</strong></p><ul><li><p>声明子系统必须为 <code>settings.json</code> 提供 JSON Schema，使用户在编辑 User / Workspace settings 时获得：</p><ul><li>key 的自动补全；</li><li>值的类型校验与错误提示；</li><li>枚举选项提示与说明。</li></ul></li></ul><p><strong>FR-DECL-SCHEMA-030 查询接口</strong></p><ul><li><p>Registry 必须提供按 Setting ID、扩展 ID、类别的查询接口，供：</p><ul><li>Configuration Service；</li><li>Settings UI；</li><li>JSON 语言服务；</li><li>诊断工具使用。</li></ul></li></ul><h3 id="_5-4-与-sync-policy-的元信息集成-使用方为外部系统" tabindex="-1">5.4 与 Sync / Policy 的元信息集成（使用方为外部系统） <a class="header-anchor" href="#_5-4-与-sync-policy-的元信息集成-使用方为外部系统" aria-label="Permalink to &quot;5.4 与 Sync / Policy 的元信息集成（使用方为外部系统）&quot;">​</a></h3><blockquote><p>注意：Sync 和 Policy 是外部系统，本小节只描述本子系统应暴露的元信息。</p></blockquote><p><strong>FR-DECL-SYNC-001 ignoreSync 与 machine-only 语义</strong></p><ul><li>Schema 必须支持 <code>ignoreSync: true</code> 标记，表示该设置不应默认参与 Settings Sync；</li><li>对于 <code>scope: &quot;machine&quot;</code> / <code>&quot;machine-overridable&quot;</code> 的设置，即便未声明 <code>ignoreSync</code>，在对外暴露给 Sync 系统时也必须视为“不可同步”。</li></ul><p><strong>FR-DECL-SYNC-002 usesOnlineServices 标签</strong></p><ul><li><p>当 Setting 声明 <code>tags: [&quot;usesOnlineServices&quot;]</code> 时，必须保留此标签：</p><ul><li>供 Settings UI 显示“使用在线服务”提示；</li><li>供 Policy 系统识别联网相关设置。</li></ul></li></ul><p><strong>FR-DECL-SYNC-003 Policy 能力标记（预留）</strong></p><ul><li>Schema 应预留字段标记某 Setting 是否可被策略管理（如 <code>policyCapable</code>），并对外暴露该信息供 Policy 系统查询。</li></ul><h3 id="_5-5-configurationdefaults-相关需求" tabindex="-1">5.5 configurationDefaults 相关需求 <a class="header-anchor" href="#_5-5-configurationdefaults-相关需求" aria-label="Permalink to &quot;5.5 configurationDefaults 相关需求&quot;">​</a></h3><p><strong>FR-DECL-DEFAULTS-001 默认值覆盖声明解析</strong></p><ul><li><p>系统必须解析 Manifest 中的 <code>contributes.configurationDefaults</code>：</p><ul><li>支持对现有 Setting 的 default override；</li><li>支持语言特定 default（如 <code>&quot;[markdown]&quot;</code>）。</li></ul></li></ul><p><strong>FR-DECL-DEFAULTS-002 目标 key 校验</strong></p><ul><li><p>对每个 configurationDefaults key：</p><ul><li>若为普通 Setting ID（如 <code>&quot;files.autoSave&quot;</code>），必须检查已存在对应 Setting 声明；</li><li>若为语言块（如 <code>&quot;[markdown]&quot;</code>），则其内部 key 也必须是已存在的 Setting ID；</li><li>未找到对应 Schema 时应记录诊断并跳过该项。</li></ul></li></ul><hr><h2 id="_6-非功能性需求-nfr" tabindex="-1">6. 非功能性需求（NFR） <a class="header-anchor" href="#_6-非功能性需求-nfr" aria-label="Permalink to &quot;6. 非功能性需求（NFR）&quot;">​</a></h2><h3 id="_6-1-性能" tabindex="-1">6.1 性能 <a class="header-anchor" href="#_6-1-性能" aria-label="Permalink to &quot;6.1 性能&quot;">​</a></h3><p><strong>NFR-DECL-PERF-001 启动性能</strong></p><ul><li>解析并注册所有扩展的配置声明不应成为 VS Code 冷启动的明显瓶颈；</li><li>可采用延迟加载策略（例如在扩展激活或首次打开 Settings UI 时完成部分注册），但从用户视角应保持“自然快速”。</li></ul><p><strong>NFR-DECL-PERF-002 查询性能</strong></p><ul><li>单个 Setting Schema 的查询应接近 O(1) 时间复杂度；</li><li>在上万 Setting ID 规模下，应能保持可接受的响应时间。</li></ul><h3 id="_6-2-内存与可扩展性" tabindex="-1">6.2 内存与可扩展性 <a class="header-anchor" href="#_6-2-内存与可扩展性" aria-label="Permalink to &quot;6.2 内存与可扩展性&quot;">​</a></h3><p><strong>NFR-DECL-MEM-001</strong></p><ul><li>面对大规模扩展生态（上万 Setting）的场景，Registry 的内存占用应在可控范围内；</li><li>必要时可采用按扩展分段加载 / 缓存等优化策略。</li></ul><h3 id="_6-3-一致性与可测试性" tabindex="-1">6.3 一致性与可测试性 <a class="header-anchor" href="#_6-3-一致性与可测试性" aria-label="Permalink to &quot;6.3 一致性与可测试性&quot;">​</a></h3><p><strong>NFR-DECL-CONS-001 可观测性</strong></p><ul><li><p>Registry 内容应可通过诊断命令或开发者工具导出，支持：</p><ul><li>调试 Schema 冲突与错误；</li><li>验证配置文档与实现的一致性。</li></ul></li></ul><p><strong>NFR-DECL-TEST-001 回归测试</strong></p><ul><li><p>对 Schema 与 Registry 行为的修改必须有回归测试，确保：</p><ul><li>Settings UI；</li><li>JSON 编辑器；</li><li>Configuration Service 等主要消费者不受破坏。</li></ul></li></ul><hr><h2 id="_7-与其他子系统及外部系统的接口概要" tabindex="-1">7. 与其他子系统及外部系统的接口概要 <a class="header-anchor" href="#_7-与其他子系统及外部系统的接口概要" aria-label="Permalink to &quot;7. 与其他子系统及外部系统的接口概要&quot;">​</a></h2><h3 id="_7-1-与存储与分层子系统" tabindex="-1">7.1 与存储与分层子系统 <a class="header-anchor" href="#_7-1-与存储与分层子系统" aria-label="Permalink to &quot;7.1 与存储与分层子系统&quot;">​</a></h3><ul><li>提供默认值集合（Default Configuration）；</li><li>提供类型、scope、ignoreSync 等信息，用于写入时校验与 defaultSettings 合并。</li></ul><h3 id="_7-2-与访问与变更子系统" tabindex="-1">7.2 与访问与变更子系统 <a class="header-anchor" href="#_7-2-与访问与变更子系统" aria-label="Permalink to &quot;7.2 与访问与变更子系统&quot;">​</a></h3><ul><li>提供用于 <code>inspect()</code> 的 Schema 信息（默认值、各层值、类型）；</li><li>提供 <code>update()</code> 前的静态检查依据（是否可写、作用域是否合法）。</li></ul><h3 id="_7-3-与-settings-ui-子系统" tabindex="-1">7.3 与 Settings UI 子系统 <a class="header-anchor" href="#_7-3-与-settings-ui-子系统" aria-label="Permalink to &quot;7.3 与 Settings UI 子系统&quot;">​</a></h3><ul><li><p>提供：</p><ul><li>Category 列表（含扩展来源）；</li><li>每个 Setting 的类型、默认值、说明、枚举、tags；</li></ul></li><li><p>Settings UI 不直接操作 Registry 内部数据结构，通过 Facade 接口获取只读视图。</p></li></ul><h3 id="_7-4-与-settings-sync-enterprise-policy-系统-外部" tabindex="-1">7.4 与 Settings Sync / Enterprise Policy 系统（外部） <a class="header-anchor" href="#_7-4-与-settings-sync-enterprise-policy-系统-外部" aria-label="Permalink to &quot;7.4 与 Settings Sync / Enterprise Policy 系统（外部）&quot;">​</a></h3><ul><li><p>暴露只读元数据视图，供外部系统按需查询：</p><ul><li>scope；</li><li>ignoreSync；</li><li>policyCapable / usesOnlineServices；</li></ul></li><li><p>不建立 Sync/Policy → Registry 的回写通道。</p></li></ul><hr><h2 id="_8-典型用例-use-cases" tabindex="-1">8. 典型用例（Use Cases） <a class="header-anchor" href="#_8-典型用例-use-cases" aria-label="Permalink to &quot;8. 典型用例（Use Cases）&quot;">​</a></h2><h3 id="uc-decl-01" tabindex="-1">UC-DECL-01 扩展声明简单设置 <a class="header-anchor" href="#uc-decl-01" aria-label="Permalink to &quot;UC-DECL-01 扩展声明简单设置 {#uc-decl-01}&quot;">​</a></h3><ul><li>扩展在 <code>package.json</code> 中添加：</li></ul><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;contributes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;configuration&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;title&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;My Extension&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;properties&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;myExt.enableFeature&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;boolean&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;default&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Enable awesome feature.&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li>声明子系统解析并注册 Schema；</li><li>Settings UI 在“扩展 → My Extension”中显示对应开关；</li><li><code>settings.json</code> 获得该 key 的自动补全与类型校验。</li></ul><h3 id="uc-decl-02" tabindex="-1">UC-DECL-02 将配置拆分为多个类别 <a class="header-anchor" href="#uc-decl-02" aria-label="Permalink to &quot;UC-DECL-02 将配置拆分为多个类别 {#uc-decl-02}&quot;">​</a></h3><ul><li>扩展将 <code>configuration</code> 设为数组，将 Setting 拆成“Content”“Appearance”等类别；</li><li>声明子系统注册多个类别；</li><li>Settings UI 中该扩展的设置页显示多个分组面板。</li></ul><h3 id="uc-decl-03" tabindex="-1">UC-DECL-03 声明资源级 Setting（resource scope） <a class="header-anchor" href="#uc-decl-03" aria-label="Permalink to &quot;UC-DECL-03 声明资源级 Setting（resource scope） {#uc-decl-03}&quot;">​</a></h3><ul><li>某扩展提供 <code>git.alwaysSignOff</code> 设置，声明 <code>scope: &quot;resource&quot;</code>；</li><li>Registry 将 scope 信息写入 Schema；</li><li>存储与分层子系统根据 scope 决定该设置可写入哪些层（User / Workspace / Folder）以及合并策略。</li></ul><h3 id="uc-decl-04" tabindex="-1">UC-DECL-04 声明非同步设置 <a class="header-anchor" href="#uc-decl-04" aria-label="Permalink to &quot;UC-DECL-04 声明非同步设置 {#uc-decl-04}&quot;">​</a></h3><ul><li>扩展声明 <code>remoteTunnelAccess.machineName</code> 并设置 <code>ignoreSync: true</code>；</li><li>对 Sync 系统而言，该 Setting 默认不参与同步；</li><li>Policy 系统仍可以引用该 Setting 进行本机策略控制（视策略设计而定）。</li></ul><h3 id="uc-decl-05" tabindex="-1">UC-DECL-05 通过 configurationDefaults 覆盖语言特定默认值 <a class="header-anchor" href="#uc-decl-05" aria-label="Permalink to &quot;UC-DECL-05 通过 configurationDefaults 覆盖语言特定默认值 {#uc-decl-05}&quot;">​</a></h3><ul><li>扩展通过 <code>configurationDefaults</code> 为 <code>&quot;[markdown]&quot;</code> 提供默认编辑器设置（如 <code>wordWrap</code>）；</li><li>声明子系统校验 key 并注册 default override；</li><li>存储与分层子系统将其合并到 defaultSettings 中，从而影响 markdown 文件的默认行为。</li></ul><hr><h2 id="_9-术语表与未来演进" tabindex="-1">9. 术语表与未来演进 <a class="header-anchor" href="#_9-术语表与未来演进" aria-label="Permalink to &quot;9. 术语表与未来演进&quot;">​</a></h2><h3 id="_9-1-术语表-本子系统局部" tabindex="-1">9.1 术语表（本子系统局部） <a class="header-anchor" href="#_9-1-术语表-本子系统局部" aria-label="Permalink to &quot;9.1 术语表（本子系统局部）&quot;">​</a></h3><ul><li><strong>Setting Schema</strong>：描述 Setting 类型、默认值、枚举与约束的 JSON Schema 片段。</li><li><strong>Configuration Registry</strong>：保存所有 Setting Schema 的内部注册表。</li><li><strong>Configuration Category</strong>：Settings UI 中的分类节点，由 <code>contributes.configuration</code> 的数组元素表示。</li><li><strong>Configuration Defaults Registry</strong>：保存 configurationDefaults 声明的默认值 override 集合。</li></ul><h3 id="_9-2-未来演进-占位" tabindex="-1">9.2 未来演进（占位） <a class="header-anchor" href="#_9-2-未来演进-占位" aria-label="Permalink to &quot;9.2 未来演进（占位）&quot;">​</a></h3><ul><li>增强 schema 校验的错误提示与诊断能力；</li><li>对大型扩展生态的 schema 变更提供增量加载与缓存优化；</li><li>更细粒度的 policyCapable / ignoreSync 扩展标记。</li></ul><hr></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><div class="edit-info" data-v-e257564d><!----><div class="last-updated" data-v-e257564d><p class="VPLastUpdated" data-v-e257564d data-v-e98dd255>Last updated: <time datetime="2025-12-09T12:14:58.000Z" data-v-e98dd255></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/vscode-spec-sham/configuration-system/configuration-core-sdd.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Previous page</span><span class="title" data-v-e257564d>设计指导 SDD</span><!--]--></a></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/vscode-spec-sham/configuration-system/configuration-declaration-sdd.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Next page</span><span class="title" data-v-e257564d>设计指导 SDD</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-5d98c3a5 data-v-e315a0ad><div class="container" data-v-e315a0ad><p class="message" data-v-e315a0ad>VS Code 关键能力规格与设计指南（模拟版）</p><p class="copyright" data-v-e315a0ad>以开放协作为目标的内部模拟文档</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"configuration-system_configuration-access-update-sdd.md\":\"DXaT5JTY\",\"configuration-system_configuration-access-update-srs.md\":\"BsvNDDmb\",\"configuration-system_configuration-core-sdd.md\":\"B_Mdssu4\",\"configuration-system_configuration-core-srs.md\":\"DN9WY1sH\",\"configuration-system_configuration-declaration-sdd.md\":\"B-m2B8N6\",\"configuration-system_configuration-declaration-srs.md\":\"B2x3MdhG\",\"configuration-system_configuration-settings-ui-sdd.md\":\"BC8q58dX\",\"configuration-system_configuration-settings-ui-srs.md\":\"B-okvwqB\",\"configuration-system_configuration-storage-layering-sdd.md\":\"Dcc_wUXG\",\"configuration-system_configuration-storage-layering-srs.md\":\"DE5EYNDQ\",\"configuration-system_index.md\":\"DhHk8950\",\"external-entry_auth-and-trust-sdd.md\":\"DnAVf3bC\",\"external-entry_auth-and-trust-srs.md\":\"MnzvEd0L\",\"external-entry_index.md\":\"wKRalPf-\",\"external-entry_remote-routing-sdd.md\":\"xDkIB0it\",\"external-entry_remote-routing-srs.md\":\"DHUbiPW_\",\"external-entry_uri-and-links-sdd.md\":\"JhyvpnHe\",\"external-entry_uri-and-links-srs.md\":\"BNViAxZY\",\"index.md\":\"CPGSWGJ8\",\"tree-view_activation-and-context-system-sdd.md\":\"Cltpzo7C\",\"tree-view_activation-and-context-system-srs.md\":\"Bp-6DW1S\",\"tree-view_commands-menus-and-keybindings-sdd.md\":\"cHoxqvl1\",\"tree-view_commands-menus-and-keybindings-srs.md\":\"DztVrm57\",\"tree-view_configuration-and-settings-sdd.md\":\"HfQ6e3d_\",\"tree-view_configuration-and-settings-srs.md\":\"DDFLTxuZ\",\"tree-view_index.md\":\"BMfKHHFQ\",\"tree-view_tree-view-sdd.md\":\"CcnIjXCs\",\"tree-view_tree-view-srs.md\":\"DGCTcsUt\",\"tree-view_uri-handler-and-deep-links-sdd.md\":\"CHAsLRO2\",\"tree-view_uri-handler-and-deep-links-srs.md\":\"Dtv6A_k8\",\"tree-view_workbench-views-and-containers-sdd.md\":\"CeaDi5tu\",\"tree-view_workbench-views-and-containers-srs.md\":\"BLrf7rhQ\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"VS Code 规格与设计\",\"description\":\"以“假装 Visual Studio Code 官方团队”的身份，汇总关键能力的事实需求（SRS）与设计指导（SDD）\",\"base\":\"/vscode-spec-sham/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":false,\"themeConfig\":{\"nav\":[{\"text\":\"Tree View 生态\",\"link\":\"/tree-view/\"},{\"text\":\"外部入口与集成\",\"link\":\"/external-entry/\"},{\"text\":\"Configuration 系统\",\"link\":\"/configuration-system/\"}],\"sidebar\":{\"/tree-view/\":[{\"text\":\"Tree View 生态\",\"items\":[{\"text\":\"章节总览\",\"link\":\"/tree-view/\"}]},{\"text\":\"核心 API｜Tree View 主域\",\"items\":[{\"text\":\"事实需求 SRS\",\"link\":\"/tree-view/tree-view-srs\"},{\"text\":\"设计指导 SDD\",\"link\":\"/tree-view/tree-view-sdd\"}]},{\"text\":\"Workbench 视图与容器\",\"items\":[{\"text\":\"事实需求 SRS\",\"link\":\"/tree-view/workbench-views-and-containers-srs\"},{\"text\":\"设计指导 SDD\",\"link\":\"/tree-view/workbench-views-and-containers-sdd\"}]},{\"text\":\"命令 / 菜单 / 快捷键\",\"items\":[{\"text\":\"事实需求 SRS\",\"link\":\"/tree-view/commands-menus-and-keybindings-srs\"},{\"text\":\"设计指导 SDD\",\"link\":\"/tree-view/commands-menus-and-keybindings-sdd\"}]},{\"text\":\"激活与上下文系统\",\"items\":[{\"text\":\"事实需求 SRS\",\"link\":\"/tree-view/activation-and-context-system-srs\"},{\"text\":\"设计指导 SDD\",\"link\":\"/tree-view/activation-and-context-system-sdd\"}]},{\"text\":\"配置与设置\",\"items\":[{\"text\":\"事实需求 SRS\",\"link\":\"/tree-view/configuration-and-settings-srs\"},{\"text\":\"设计指导 SDD\",\"link\":\"/tree-view/configuration-and-settings-sdd\"}]},{\"text\":\"URI Handler 与深链\",\"items\":[{\"text\":\"事实需求 SRS\",\"link\":\"/tree-view/uri-handler-and-deep-links-srs\"},{\"text\":\"设计指导 SDD\",\"link\":\"/tree-view/uri-handler-and-deep-links-sdd\"}]}],\"/external-entry/\":[{\"text\":\"外部入口与集成\",\"items\":[{\"text\":\"章节总览\",\"link\":\"/external-entry/\"}]},{\"text\":\"URI 与外部链接\",\"items\":[{\"text\":\"事实需求 SRS\",\"link\":\"/external-entry/uri-and-links-srs\"},{\"text\":\"设计指导 SDD\",\"link\":\"/external-entry/uri-and-links-sdd\"}]},{\"text\":\"安全与信任（占位）\",\"items\":[{\"text\":\"事实需求 SRS\",\"link\":\"/external-entry/auth-and-trust-srs\"},{\"text\":\"设计指导 SDD\",\"link\":\"/external-entry/auth-and-trust-sdd\"}]},{\"text\":\"Remote/Web 路由（占位）\",\"items\":[{\"text\":\"事实需求 SRS\",\"link\":\"/external-entry/remote-routing-srs\"},{\"text\":\"设计指导 SDD\",\"link\":\"/external-entry/remote-routing-sdd\"}]}],\"/configuration-system/\":[{\"text\":\"Configuration 系统\",\"items\":[{\"text\":\"章节总览\",\"link\":\"/configuration-system/\"}]},{\"text\":\"体系总览\",\"items\":[{\"text\":\"事实需求 SRS\",\"link\":\"/configuration-system/configuration-core-srs\"},{\"text\":\"设计指导 SDD\",\"link\":\"/configuration-system/configuration-core-sdd\"}]},{\"text\":\"声明子系统\",\"items\":[{\"text\":\"事实需求 SRS\",\"link\":\"/configuration-system/configuration-declaration-srs\"},{\"text\":\"设计指导 SDD\",\"link\":\"/configuration-system/configuration-declaration-sdd\"}]},{\"text\":\"存储与分层子系统\",\"items\":[{\"text\":\"事实需求 SRS\",\"link\":\"/configuration-system/configuration-storage-layering-srs\"},{\"text\":\"设计指导 SDD\",\"link\":\"/configuration-system/configuration-storage-layering-sdd\"}]},{\"text\":\"访问与变更子系统\",\"items\":[{\"text\":\"事实需求 SRS\",\"link\":\"/configuration-system/configuration-access-update-srs\"},{\"text\":\"设计指导 SDD\",\"link\":\"/configuration-system/configuration-access-update-sdd\"}]},{\"text\":\"Settings UI 子系统\",\"items\":[{\"text\":\"事实需求 SRS\",\"link\":\"/configuration-system/configuration-settings-ui-srs\"},{\"text\":\"设计指导 SDD\",\"link\":\"/configuration-system/configuration-settings-ui-sdd\"}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/irideas/vscode-spec-sham\"}],\"footer\":{\"message\":\"VS Code 关键能力规格与设计指南（模拟版）\",\"copyright\":\"以开放协作为目标的内部模拟文档\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>